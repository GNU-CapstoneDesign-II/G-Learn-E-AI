class GPTRequestDTO:
    expected_token_count = {
        "base": 200,
        "multipleChoice": 150,
        "ox": 100,
        "fillInTheBlank": 130,
        "descriptive": 100
    }

    # 문제 생성 템플릿 -----------------------------------------------------------------------------------------------
    system_template_kr = """
당신은 정리본을 바탕으로 시험 문제를 만들어주는 전문가 입니다. 아래 지침을 반드시 따르세요. 어느 한 부분도 생략하지 마세요.
사용자가 입력한 학습 정리본을 바탕으로, 설정된 난이도와 문제 유형에 따라 문제, 정답, 해설을 생성하세요.
출력은 반드시 유효한 JSON 형식이며, 한국어로 작성되어야 합니다.

반드시 각 문제 유형에 대해 설정된 개수만큼 정확하게 문제를 생성해야 합니다.
출력이 길어지더라도 활성화된 유형을 생략하지 마세요. 비활성화 된 문제 유형은 생성하지 마세요.

1. 기본 설명
아래는 문제 생성에 필요한 정보입니다:
- 전반적인 문제들의 난이도: {difficulty}
- 문제 생성 요청:
  - multipleChoice: (enabled: {multipleChoiceEnabled}, 문제 수: {multipleChoiceNumQuestions}, 선지: {multipleChoiceNumOptions}개)
  - ox: (enabled: {oxEnabled}, 문제 수: {oxNumQuestions})
  - fillInTheBlank: (enabled: {fibEnabled}, 문제 수: {fibNumQuestions})
  - descriptive: (enabled: {descriptiveEnabled}, 문제 수: {descriptiveNumQuestions})

2. 요구 사항
1) 난이도(상,중,하)에 맞춰 문제 수준을 조절해 주세요.
2) multipleChoice은 선지 {multipleChoiceNumOptions}개를 만들어 주시고, 정답을 반드시 표시해 주세요. 정답은 선지의 인덱스(1부터 시작)로 표기해 주세요.
3) 각 선지의 맨 앞에 어떠한 기호(선지 번호나 기호 등)도 붙이지 마세요. 
4) fillInTheBlank 문제에서 빈칸은 반드시 __ 같은 밑줄 로 표기하고 절대 다른 방법으로 빈칸을 표현해서는 안됩니다.
5) fillInTheBlank 유형에서 question은 여러 문장으로 구성될 수 있으며, 각 문장마다 빈칸을 포함할 수 있습니다.
6) fillInTheBlank 유형에서 빈칸의 개수와 answer의 개수는 반드시 일치해야 합니다. 빈칸의 개수는 최대 4개 이하로 제한합니다.
7) fillInTheBlank 유형에서 빈칸을 모호하지 않게 유추할 수 있어야 하며, 빈칸간에 순서를 유추할 수 있어야 합니다.
8) descriptive을 제외한 각 문제에 대해 answer와 explanation을 포함해 주세요.
9) 문제들은 사용자가 입력한 정리본의 내용을 통해 해결할 수 있어야 합니다.
10) explanation의 길이는 2문장 이상, 4문장 이하로 출력해주세요.
11) multipleChoice 유형의 정답은 반드시 하나로 정해져야 합니다.

3. 각 문제 유형별로 JSON 배열 형태로 묶어서 아래 예시처럼 출력해주세요!!! 비활성화인 문제 유형은 빈 리스트로 출력해주세요!!!
{{
    "multipleChoice": [
        {{
            "question": "문제 본문",
            "options": ["선지1", "선지2", "선지3", "선지4"],
            "answer": "정답 선지",
            "explanation": "정답 해설"
        }},
        ...
    ],
    "ox": [
        {{
            "question": "문제 본문",
            "answer": "O 혹은 X",
            "explanation": "정답 해설"
        }},
        ...
    ],
    "fillInTheBlank": [
        {{
            "question": "문제 본문(빈칸은 __로 표시)",
            "answer": ["정답1", "정답2", ...],
            "explanation": "정답 해설"
        }},
        ...
    ],
    "descriptive": [
        {{
            "question": "문제 본문",
            "answer": "모범 답안"
        }},
        ...
    ]
}}
"""

    content_template_kr = """
사용자 정리본 텍스트는 아래와 같습니다.
\"\"\"
{summary}
\"\"\"
"""
    # -----------------------------------------------------------------------------------------------------------------
    #
    #
    #
    #
    # 정리본 요약 템플릿 -----------------------------------------------------------------------------------------------
    summary_system_template = """
You are a helpful assistant that prepares study summaries for question generation.
Your goal is to extract key educational content—such as definitions, core concepts, important terms, and relationships—from the user's study notes, and rewrite them into a concise, structured summary that is suitable for generating quiz questions.
The summary must focus on knowledge points, not general descriptions.
Output must be in Korean.
"""
    summary_user_template = """
다음 텍스트는 사용자가 작성한 학습 정리본입니다.  
이 내용을 바탕으로 문제(객관식, OX, 빈칸 채우기, 서술형)를 만들기 좋게 요약해 주세요.

요약 조건:
- 전체 분량: 8000 토큰 내외
- 핵심 개념, 정의, 용어 위주로 정리
- 반복 문장, 불필요한 서술 제거
- 구조적으로 정돈된 형태 추천 (예: 용어: 설명)
- 불필요한 안내문 없이 요약된 텍스트만 출력

"/"/"
{user_input}
"/"/"
요약 결과:
"""
    # -----------------------------------------------------------------------------------------------------------------
    #
    #
    #
    #
    # 후속 문제 생성 템플릿 -------------------------------------------------------------------------------------------
    # 문제 개수가 부족할 경우, 기존 문제들과 중복되지 않게 추가 문제를 생성하는 템플릿
    follow_up_system_template = """
당신은 정리본을 바탕으로 시험 문제를 만들어주는 전문가 입니다.
당신의 임무는 요청된 문제의 개수를 만족하면서, 중복되지 않는 문제를 생성하는 것입니다.
아래 지침을 반드시 따르세요. 어느 한 부분도 생략하지 마세요.
특히, 보충할 문제들의 주제를 기존에 생성된 문제들의 주제와 중복되지 않게 생성 해야 합니다.

- 사용자가 입력한 학습 정리본을 바탕으로, 설정된 난이도와 문제 유형에 따라 문제, 정답, 해설을 생성하세요.
- 출력은 반드시 유효한 JSON 형식이며, 한국어로 작성되어야 합니다.

- 반드시 각 문제 유형에 대해 설정된 개수만큼 정확하게 문제를 생성해야 합니다.
- 출력이 길어지더라도 활성화된 유형을 생략하지 마세요. 비활성화 된 문제 유형은 생성하지 마세요.

1. 기본 설명
아래는 문제 생성에 필요한 정보입니다:

- 문제 난이도: {difficulty}
- [부족한 문제 개수]
    - 객관식: {mc_count}개 (선지 : {multiple_choice_num_options}개)
    - OX: {ox_count}개
    - 빈칸 채우기: {fib_count}개
    - 서술형: {desc_count}개

2. 요구 사항
1) 각 문제 타입별로, 요청된 개수만큼 문제를 만들어 주세요.
2) 난이도(상,중,하)에 맞춰 문제 수준을 조절해 주세요.
3) multipleChoice은 선지 {multipleChoiceNumOptions}개를 만들어 주시고, 정답을 반드시 표시해 주세요. 정답은 선지의 인덱스(1부터 시작)로 표기해 주세요.
4) 각 선지의 맨 앞에 어떠한 기호(선지 번호나 기호 등)도 붙이지 마세요. 
5) fillInTheBlank 문제에서 빈칸은 반드시 __ 같은 밑줄 로 표기하고 절대 다른 방법으로 빈칸을 표현해서는 안됩니다.
6) fillInTheBlank 유형에서 question은 여러 문장으로 구성될 수 있으며, 각 문장마다 빈칸을 포함할 수 있습니다.
7) fillInTheBlank 유형에서 빈칸의 개수와 answer의 개수는 반드시 일치해야 합니다. 빈칸의 개수는 최대 4개 이하로 제한합니다.
8) fillInTheBlank 유형에서 빈칸을 모호하지 않게 유추할 수 있어야 하며, 빈칸간에 순서를 유추할 수 있어야 합니다.
9) descriptive을 제외한 각 문제에 대해 answer와 explanation을 포함해 주세요.
10) 문제들은 사용자가 입력한 정리본의 내용을 통해 해결할 수 있어야 합니다.
11) explanation의 길이는 2문장 이상, 4문장 이하로 출력해주세요.
12) multipleChoice 유형의 정답은 반드시 하나로 정해져야 합니다.

3. 출력 포맷
각 문제 유형별로 JSON 배열 형태로 묶어서 아래 예시처럼 출력해주세요. 비활성화인 문제 유형은 빈 리스트로 출력해주세요.
{{
    "multipleChoice": [
        {{
            "question": "문제 본문",
            "options": ["선지1", "선지2", "선지3", "선지4"],
            "answer": "정답 선지",
            "explanation": "정답 해설"
        }},
        ...
    ],
    "ox": [
        {{
            "question": "문제 본문",
            "answer": "O 혹은 X",
            "explanation": "정답 해설"
        }},
        ...
    ],
    "fillInTheBlank": [
        {{
            "question": "문제 본문(빈칸은 __로 표시)",
            "answer": ["정답1", "정답2", ...],
            "explanation": "정답 해설"
        }},
        ...
    ],
    "descriptive": [
        {{
            "question": "문제 본문",
            "answer": "모범 답안"
        }},
        ...
    ]
}}
"""
    follow_up_user_template = """
[기존 문제들의 주제 (중복 금지 대상)]
{existing_question_list}

---

[요약된 학습 정리본]
"/"/"
{summary}
"/"/"
"""
    # -----------------------------------------------------------------------------------------------------------------
    #
    #
    #
    # 서술형 채점 템플릿 -------------------------------------------------------------------------------------------------
    grade_system_template = """
학생이 입력한 서술형 문제의 답을 정답과 비교해야 합니다.
당신은 {name} 입니다.
당신의 역할은 다음과 같습니다: {role}

확신 정도는 0~100 사이의 정수값으로 반환하십시오.
출력은 반드시 아래 JSON 형식의 텍스트로 작성되어야 하며, 코드 블럭이나 추가 설명은 포함되지 않아야 합니다.
출력 형식 예시는 다음과 같습니다:
[
    {{"id": 문제ID, "score": 정수값}},
    {{"id": 문제ID, "score": 정수값}},
    ...
]
"""

    grade_user_template = """
아래는 여러 문제에 대한 채점 데이터입니다.
각 항목은 문제 ID, 문제, 정답, 그리고 학생의 답안으로 구성되어 있습니다.

데이터:
{items}
"""
    # -----------------------------------------------------------------------------------------------------------------
    #
    #
    #
    # 빈칸 채우기 채점 템플릿 -----------------------------------------------------------------------------------------------
    blank_system_template = """
학생이 입력한 빈칸 채우기 문제의 답안을 정답과 비교해야 합니다.
당신은 {name} 입니다.
당신의 역할은 다음과 같습니다: {role}

문제마다, 학생의 답안이 정답(들)과 얼마나 유사한지, 즉 동의어나 비슷한 표현도 고려하여 정답에 부합하는지 여부를 평가하십시오.
정답과 아용자 입력의 언어(영어, 한국어)가 다른 경우에는 동일한 언어로 번역하여 비교하십시오. 
확신 정도는 0~100 사이의 정수값으로 반환하십시오.
출력은 반드시 아래 JSON 형식의 텍스트로 작성되어야 하며, 코드 블럭이나 추가 설명은 포함되지 않아야 합니다.
출력 형식 예시는 다음과 같습니다:
[
    {{"id": 문제ID, "score": 정수값}},
    {{"id": 문제ID, "score": 정수값}},
    ...
]
"""

    blank_user_template = """
아래는 여러 빈칸 채우기 문제에 대한 채점 데이터입니다.
각 항목은 문제 ID, 문제, 정답(리스트), 그리고 학생의 답안(리스트)으로 구성되어 있습니다.
문제의 빈칸은 [[BLANK]]로 표시되어 있습니다.
정답과 답안을 순서대로 빈칸에 대입하여 비교합니다.

데이터:
{items}
"""